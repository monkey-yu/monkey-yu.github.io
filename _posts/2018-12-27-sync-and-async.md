---
layout:     post
title:      "同步、异步、阻塞与非阻塞"
subtitle:   " \"同步、异步、阻塞与非阻塞 \""
date:       2018-12-27 12:00:00
author:     "monkey-yu"
header-img: "img/tree.jpg"
catalog: true
tags:
    - 技术
---
> 聊聊同步异步与阻塞非阻塞

#### 同步 (synchronous) vs. 异步 (asynchronous)

同步和异步关注的是**消息通信机制。**

- 同步：发出一个调用，在没有得到结果之前，该调用不返回。一旦调用返回，就得到返回值了。
- 异步：发出一个调用，这个调用就直接返回了，所以没有返回结果。**当被调用者获得结果，会使用其他方式来通知调用者，或者通过回调函数来处理这个调用。**

举个通俗的例子：

- 你打电话问书店老板有没有《分布式系统》这本书。如果是同步通信机制，书店老板会说，你稍等，”我查一下"，然后开始查啊查，等查好了（可能是5秒，也可能是一天）告诉你结果（返回结果）。
- 而异步通信机制，书店老板直接告诉你我查一下啊，查好了打电话给你，然后直接挂电话了（不返回结果）。然后查好了，他会主动打电话给你（回调函数）。

#### 阻塞 (blocking) vs. 非阻塞 (non-blocking)

阻塞和非阻塞关注的是**程序在等待调用结果时的状态。**

- 阻塞调用：在调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。
- 非阻塞调用：在不能立刻得到结果时，该调用不会阻塞当前线程。

还是上面的例子：

- 你打电话问书店老板有没有《分布式系统》这本书。如果是阻塞式调用，你会一直等待，直到得到这本书有没有的结果。
- 如果是非阻塞式调用，你不管老板有没有告诉你，你自己先一边去玩了。你可能要偶尔过几分钟询问一下老板有没有返回结果（异步-轮询），或者让老板主动打电话来告诉你结果（异步-回调）。

在实际应用中只有三种调用方式：**同步-阻塞、同步-非阻塞、异步**

一般异步是配合非阻塞使用的，这样才能发挥异步的效用。